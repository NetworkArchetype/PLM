#cloud-config
autoinstall:
  version: 1
  locale: en_US.UTF-8
  keyboard: { layout: us }
  identity:
    hostname: plm-ubuntu-desktop
    username: plm
    # CHANGE THIS:
      password: "meowmeowmeow"
   ssh:
    install-server: false
    allow-pw: true

  packages: [git, python3, python3-pip]

  late-commands:
    - curtin in-target --target=/target -- bash -lc 'mkdir -p /opt/plm && git clone https://github.com/NetworkArchetype/PLM /opt/plm/PLM'
    - curtin in-target --target=/target -- bash -lc 'python3 -m pip install --upgrade pip && python3 -m pip install cirq'
    - curtin in-target --target=/target -- bash -lc 'python3 -c "import cirq; print(cirq.__version__)" > /root/cirq_version.txt'